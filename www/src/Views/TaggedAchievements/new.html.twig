{% extends 'Layouts/main.html.twig' %}

{% block content %}
    <div class="text-white text-2xl mb-2 ml-2 px-2 py-1 inline-block" style="background-color: {{ tag.background_color }}">
        <i class="fa-solid fa-hashtag"></i> {{ tag.name }}
    </div>
    <div class="text-neutral-300 text-md mb-4 ml-2">Tag Achievements by clicking on them, when you're done click on "Finish"</div>
    <form action="/tagged_achievements/create.php" method="POST">
        <input type="hidden" name="tag_id" value="{{tag.id}}">
        <div class="sticky top-0 text-center bg-neutral-950/60 backdrop-blur-sm mb-4">
            <button type="submit" class="bg-green-500 text-white inline-block px-2 py-1"><i class="fa-solid fa-paper-plane"></i> Finish</button>
        </div>
        <div class="grid gap-1 grid-cols-1 md:grid-cols-2 xl:grid-cols-3">
            {% for achievement in achievements %}
                <div>
                    <input type="checkbox" name="checked_ids[]" id="checked_ids_{{achievement.id}}" value="{{ achievement.id }}" class="peer hidden">
                    <label class="flex flex-col justify-between w-full p-2 peer-checked:bg-green-800 bg-neutral-800" for="checked_ids_{{achievement.id}}">
                        <div class="flex">
                            <div>
                                <div style="background-image: url('{{ achievement.icon }}'); width: 50px; height: 50px" class="bg-cover flex-none mr-2"></div>
                            </div>
                            <div>
                                <p class="text-md line-clamp-1 text-white" title="<?php echo $achievement->display_name ?>">
                                    {{ achievement.display_name }}
                                </p>
                                <p class="text-sm line-clamp-2 hover:line-clamp-none text-neutral-400">
                                    {% if not achievement.hidden %}
                                        {{ achievement.description }}
                                    {% else %}
                                        {% if achievement.description is not null %}
                                            {{ achievement.description }}<br>
                                        {% endif %}
                                        <a href="/games/edit.php?{{ { "achievementid": achievement.id }|url_encode }}" class="px-1 py-0.5 inline-block">
                                            <i class="fa-solid fa-pen-to-square"></i> {{ achievement.description is not null ? 'Edit' : 'Add' }} description
                                        </a>
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                    </label>
                </div>
            {% endfor %}
        </div>
    </form>
{% endblock %}
